<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300" width="400" height="300">
  <defs>
    <!-- ULTIMATE GLASS MORPHISM -->
    <linearGradient id="glassBody" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#5A7FBA" stop-opacity="0.92"/>
      <stop offset="15%" stop-color="#3E5E94" stop-opacity="0.88"/>
      <stop offset="50%" stop-color="#2A4470" stop-opacity="0.85"/>
      <stop offset="85%" stop-color="#1E3355" stop-opacity="0.88"/>
      <stop offset="100%" stop-color="#162848" stop-opacity="0.92"/>
    </linearGradient>

    <linearGradient id="glassShineTop" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#A8C8F0" stop-opacity="0.5"/>
      <stop offset="15%" stop-color="#8AB4E8" stop-opacity="0.25"/>
      <stop offset="40%" stop-color="#6A9AD8" stop-opacity="0.08"/>
      <stop offset="100%" stop-color="#6A9AD8" stop-opacity="0"/>
    </linearGradient>

    <linearGradient id="glassShineEdge" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#B8D4F8" stop-opacity="0.7"/>
      <stop offset="3%" stop-color="#8AB4E8" stop-opacity="0.4"/>
      <stop offset="10%" stop-color="#6A9AD8" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#5080C0" stop-opacity="0.2"/>
      <stop offset="90%" stop-color="#4070B0" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#6090D0" stop-opacity="0.4"/>
    </linearGradient>

    <linearGradient id="headerGlass" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#1A2E4A" stop-opacity="0.98"/>
      <stop offset="50%" stop-color="#142438" stop-opacity="0.96"/>
      <stop offset="100%" stop-color="#0F1C2C" stop-opacity="0.98"/>
    </linearGradient>

    <linearGradient id="headerShine" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#4A6A9A" stop-opacity="0.3"/>
      <stop offset="100%" stop-color="#4A6A9A" stop-opacity="0"/>
    </linearGradient>

    <!-- RING SYSTEM -->
    <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#6B9FE8"/>
      <stop offset="25%" stop-color="#5B8FD8"/>
      <stop offset="50%" stop-color="#8BBAF8"/>
      <stop offset="75%" stop-color="#5B8FD8"/>
      <stop offset="100%" stop-color="#6B9FE8"/>
    </linearGradient>

    <linearGradient id="ringInner" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#64FFDA" stop-opacity="0.6"/>
      <stop offset="50%" stop-color="#64FFDA" stop-opacity="0.9"/>
      <stop offset="100%" stop-color="#64FFDA" stop-opacity="0.6"/>
    </linearGradient>

    <!-- PARTICLE GLOW -->
    <radialGradient id="particleCore" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#FFFFFF"/>
      <stop offset="40%" stop-color="#64FFDA"/>
      <stop offset="100%" stop-color="#64FFDA" stop-opacity="0"/>
    </radialGradient>

    <!-- CODE SHIMMER -->
    <linearGradient id="shimmer" x1="-100%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#FFFFFF" stop-opacity="0"/>
      <stop offset="40%" stop-color="#FFFFFF" stop-opacity="0"/>
      <stop offset="50%" stop-color="#FFFFFF" stop-opacity="0.2"/>
      <stop offset="60%" stop-color="#FFFFFF" stop-opacity="0"/>
      <stop offset="100%" stop-color="#FFFFFF" stop-opacity="0"/>
      <animateTransform attributeName="gradientTransform" type="translate" from="-1" to="2" dur="3s" repeatCount="indefinite"/>
    </linearGradient>

    <!-- FILTERS -->
    <filter id="megaShadow" x="-100%" y="-100%" width="300%" height="300%">
      <feDropShadow dx="0" dy="20" stdDeviation="30" flood-color="#000A14" flood-opacity="0.95"/>
      <feDropShadow dx="0" dy="8" stdDeviation="15" flood-color="#1A3A6B" flood-opacity="0.6"/>
      <feDropShadow dx="0" dy="3" stdDeviation="6" flood-color="#3B7DD8" flood-opacity="0.3"/>
      <feDropShadow dx="0" dy="0" stdDeviation="2" flood-color="#64FFDA" flood-opacity="0.15"/>
    </filter>

    <filter id="ultraGlow" x="-200%" y="-200%" width="500%" height="500%">
      <feGaussianBlur stdDeviation="2" result="b1"/>
      <feGaussianBlur stdDeviation="5" result="b2"/>
      <feGaussianBlur stdDeviation="10" result="b3"/>
      <feGaussianBlur stdDeviation="20" result="b4"/>
      <feMerge>
        <feMergeNode in="b4"/>
        <feMergeNode in="b3"/>
        <feMergeNode in="b2"/>
        <feMergeNode in="b1"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <filter id="buttonGlow" x="-100%" y="-100%" width="300%" height="300%">
      <feGaussianBlur stdDeviation="1.5" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <filter id="textGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="0.8" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- ORBIT PATH -->
    <ellipse id="orbitPath" cx="200" cy="138" rx="175" ry="125" fill="none"/>

    <!-- CODE VIEWPORT CLIP (below header bar) -->
    <clipPath id="editorClip">
      <rect x="55" y="82" width="290" height="155" rx="10" ry="10"/>
    </clipPath>

    <style>
      /* NOTE: We use CSS animations here (instead of SMIL) so the "typing" can loop cleanly. */
      .token {
        opacity: 0;
        transform: scaleX(0);
        transform-origin: left center;
        transform-box: fill-box;
        animation: typeToken var(--cycle, 8s) ease-out infinite;
        animation-delay: var(--d, 0s);
      }

      @keyframes typeToken {
        0% { opacity: 0; transform: scaleX(0); }
        2% { opacity: var(--o, 0.9); transform: scaleX(1); }
        86% { opacity: var(--o, 0.9); transform: scaleX(1); }
        100% { opacity: 0; transform: scaleX(0); }
      }

      .scrollLayer {
        opacity: 0;
        animation: scrollAndFade var(--cycle, 8s) linear infinite;
      }

      @keyframes scrollAndFade {
        0% { opacity: 0; transform: translateY(0); }
        6% { opacity: 1; transform: translateY(0); }
        90% { opacity: 1; transform: translateY(-56px); }
        100% { opacity: 0; transform: translateY(-56px); }
      }

      .shimmerRect {
        opacity: 0;
        animation: shimmerPulse var(--cycle, 8s) ease-in-out infinite;
      }

      @keyframes shimmerPulse {
        0%, 46% { opacity: 0; }
        52% { opacity: 0.7; }
        60% { opacity: 0; }
        100% { opacity: 0; }
      }

      .cursorGate {
        opacity: 0;
        animation: cursorGate var(--cycle, 8s) linear infinite;
      }

      @keyframes cursorGate {
        0%, 48% { opacity: 0; }
        49%, 100% { opacity: 1; }
      }

      .cursorBlink {
        opacity: 0;
        animation: cursorBlink 1s steps(2, end) infinite;
      }

      @keyframes cursorBlink {
        0%, 49% { opacity: 1; }
        50%, 100% { opacity: 0; }
      }

      .activeLine {
        opacity: 0;
        animation: activeLine var(--cycle, 8s) ease-in-out infinite;
      }

      @keyframes activeLine {
        0%, 48% { opacity: 0; }
        52%, 86% { opacity: 0.06; }
        100% { opacity: 0; }
      }
    </style>
  </defs>

  <!-- ═══════════════ TRANSPARENT BACKGROUND ═══════════════ -->
  <rect width="400" height="300" fill="transparent"/>

  <!-- ═══════════════ ORBITAL RING SYSTEM ═══════════════ -->
  <g filter="url(#ultraGlow)">
    <!-- Outermost ethereal ring -->
    <ellipse cx="200" cy="138" rx="185" ry="132" fill="none" stroke="#3A6AAA" stroke-width="0.5" stroke-dasharray="2 10" opacity="0.25">
      <animateTransform attributeName="transform" type="rotate" from="0 200 138" to="360 200 138" dur="90s" repeatCount="indefinite"/>
    </ellipse>

    <!-- Main orbital track -->
    <ellipse cx="200" cy="138" rx="175" ry="125" fill="none" stroke="#1A3A5A" stroke-width="4" opacity="0.25"/>

    <!-- Primary progress ring -->
    <ellipse cx="200" cy="138" rx="175" ry="125" fill="none" stroke="url(#ringGradient)" stroke-width="3" stroke-dasharray="40 22 15 22 30 22 20 22" stroke-linecap="round" opacity="0.85">
      <animateTransform attributeName="transform" type="rotate" from="0 200 138" to="360 200 138" dur="15s" repeatCount="indefinite"/>
    </ellipse>

    <!-- Secondary ring -->
    <ellipse cx="200" cy="138" rx="168" ry="118" fill="none" stroke="#7BABF8" stroke-width="1.5" stroke-dasharray="8 18" opacity="0.3">
      <animateTransform attributeName="transform" type="rotate" from="360 200 138" to="0 200 138" dur="20s" repeatCount="indefinite"/>
    </ellipse>

    <!-- Inner glow ring -->
    <ellipse cx="200" cy="138" rx="160" ry="112" fill="none" stroke="url(#ringInner)" stroke-width="1" opacity="0.4">
      <animate attributeName="opacity" values="0.25;0.5;0.25" dur="2s" repeatCount="indefinite"/>
    </ellipse>
  </g>

  <!-- Orbiting energy particle -->
  <g filter="url(#ultraGlow)">
    <circle r="6" fill="url(#particleCore)">
      <animateMotion dur="15s" repeatCount="indefinite">
        <mpath href="#orbitPath"/>
      </animateMotion>
      <animate attributeName="r" values="4;7;4" dur="1.2s" repeatCount="indefinite"/>
    </circle>
  </g>

  <!-- Second orbiting particle (opposite) -->
  <g filter="url(#ultraGlow)" opacity="0.7">
    <circle r="4" fill="#C792EA">
      <animateMotion dur="15s" repeatCount="indefinite" begin="-7.5s">
        <mpath href="#orbitPath"/>
      </animateMotion>
      <animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
    </circle>
  </g>

  <!-- ═══════════════ CODE EDITOR WINDOW ═══════════════ -->
  <g filter="url(#megaShadow)">
    <!-- Main glass body -->
    <rect x="45" y="35" width="310" height="205" rx="16" ry="16" fill="url(#glassBody)"/>

    <!-- Top shine layer -->
    <rect x="45" y="35" width="310" height="205" rx="16" ry="16" fill="url(#glassShineTop)"/>

    <!-- Edge highlight stroke -->
    <rect x="45" y="35" width="310" height="205" rx="16" ry="16" fill="none" stroke="url(#glassShineEdge)" stroke-width="1.5"/>

    <!-- Inner glow border -->
    <rect x="48" y="38" width="304" height="199" rx="14" ry="14" fill="none" stroke="#A8C8F0" stroke-width="0.5" opacity="0.12"/>

    <!-- Subtle inner shadow -->
    <rect x="50" y="40" width="300" height="195" rx="12" ry="12" fill="none" stroke="#0A1520" stroke-width="1" opacity="0.15"/>

    <!-- ═══════════════ HEADER BAR ═══════════════ -->
    <rect x="45" y="35" width="310" height="42" rx="16" ry="16" fill="url(#headerGlass)"/>
    <rect x="45" y="60" width="310" height="17" fill="url(#headerGlass)"/>

    <!-- Header top shine -->
    <rect x="45" y="35" width="310" height="20" rx="16" ry="16" fill="url(#headerShine)"/>

    <!-- Header bottom line -->
    <line x1="45" y1="77" x2="355" y2="77" stroke="#3A5A8A" stroke-width="0.5" opacity="0.4"/>

    <!-- ═══════════════ TRAFFIC LIGHTS ═══════════════ -->
    <g filter="url(#buttonGlow)">
      <!-- Close -->
      <circle cx="72" cy="56" r="7.5" fill="#FF5F57"/>
      <circle cx="69" cy="53" r="2.5" fill="#FF8A84" opacity="0.8"/>

      <!-- Minimize -->
      <circle cx="98" cy="56" r="7.5" fill="#FFBD2E"/>
      <circle cx="95" cy="53" r="2.5" fill="#FFD980" opacity="0.8"/>

      <!-- Maximize -->
      <circle cx="124" cy="56" r="7.5" fill="#28CA42"/>
      <circle cx="121" cy="53" r="2.5" fill="#6EE890" opacity="0.8"/>
    </g>

    <!-- File name -->
    <text x="200" y="60" font-family="'SF Pro Display', 'Inter', -apple-system, sans-serif" font-size="13" fill="#9CBAE8" text-anchor="middle" font-weight="500" letter-spacing="0.3">agent.ts</text>
  </g>

  <!-- ═══════════════ EDITOR CONTENT (CLIPPED + SCROLLING) ═══════════════ -->
  <g clip-path="url(#editorClip)">
    <g class="scrollLayer" style="--cycle: 8s;">
      <!-- Active line highlight (behind tokens) -->
      <rect class="activeLine" x="55" y="200" width="290" height="24" fill="#5B8FE8" rx="4"/>

      <!-- ═══════════════ LINE NUMBERS ═══════════════ -->
      <g font-family="'JetBrains Mono', 'SF Mono', 'Fira Code', monospace" font-size="13" fill="#4A7AAA" opacity="0.8">
        <text x="65" y="105">1</text>
        <text x="65" y="133">2</text>
        <text x="65" y="161">3</text>
        <text x="65" y="189">4</text>
        <text x="65" y="217">5</text>
      </g>

      <!-- Gutter separator -->
      <line x1="82" y1="85" x2="82" y2="230" stroke="#4A7AAA" stroke-width="1" opacity="0.2"/>

      <!-- ═══════════════ CODE LINES (LOOPING "TYPING") ═══════════════ -->
      <g>
        <!-- Line 1: import { Agent } from 'ron-ai' -->
        <rect class="token" style="--d: 0.2s; --o: 0.95;" x="95" y="94" width="55" height="9" rx="4.5" fill="#C792EA"/>
        <rect class="token" style="--d: 0.4s; --o: 0.9;" x="156" y="94" width="70" height="9" rx="4.5" fill="#FFD700"/>
        <rect class="token" style="--d: 0.65s; --o: 0.85;" x="232" y="94" width="45" height="9" rx="4.5" fill="#82AAFF"/>
        <rect class="token" style="--d: 0.85s; --o: 0.85;" x="283" y="94" width="55" height="9" rx="4.5" fill="#C3E88D"/>

        <!-- Line 2: const agent = new Agent({ -->
        <rect class="token" style="--d: 1.1s; --o: 1;" x="95" y="122" width="48" height="9" rx="4.5" fill="#64FFDA"/>
        <rect class="token" style="--d: 1.3s; --o: 0.85;" x="149" y="122" width="55" height="9" rx="4.5" fill="#E0F0FF"/>
        <rect class="token" style="--d: 1.55s; --o: 1;" x="210" y="122" width="35" height="9" rx="4.5" fill="#64FFDA"/>
        <rect class="token" style="--d: 1.7s; --o: 0.9;" x="251" y="122" width="55" height="9" rx="4.5" fill="#82AAFF"/>
        <rect class="token" style="--d: 1.9s; --o: 0.9;" x="312" y="122" width="22" height="9" rx="4.5" fill="#FFD700"/>

        <!-- Line 3:   model: 'claude-4.5-sonnet' -->
        <rect class="token" style="--d: 2.1s; --o: 0.9;" x="110" y="150" width="50" height="9" rx="4.5" fill="#82AAFF"/>
        <rect class="token" style="--d: 2.3s; --o: 0.85;" x="166" y="150" width="130" height="9" rx="4.5" fill="#C3E88D"/>

        <!-- Line 4:   tools: [browse, code] -->
        <rect class="token" style="--d: 2.7s; --o: 0.9;" x="110" y="178" width="45" height="9" rx="4.5" fill="#82AAFF"/>
        <rect class="token" style="--d: 2.9s; --o: 0.9;" x="161" y="178" width="25" height="9" rx="4.5" fill="#FFD700"/>
        <rect class="token" style="--d: 3.05s; --o: 0.85;" x="192" y="178" width="55" height="9" rx="4.5" fill="#E0F0FF"/>
        <rect class="token" style="--d: 3.25s; --o: 0.85;" x="253" y="178" width="50" height="9" rx="4.5" fill="#E0F0FF"/>
        <rect class="token" style="--d: 3.4s; --o: 0.9;" x="309" y="178" width="18" height="9" rx="4.5" fill="#FFD700"/>

        <!-- Line 5: }); -->
        <rect class="token" style="--d: 3.55s; --o: 0.95;" x="95" y="206" width="22" height="9" rx="4.5" fill="#FFD700"/>
        <rect class="token" style="--d: 3.65s; --o: 0.8;" x="123" y="206" width="12" height="9" rx="4.5" fill="#E0F0FF"/>
      </g>

      <!-- Code shimmer overlay -->
      <rect class="shimmerRect" x="90" y="88" width="255" height="135" fill="url(#shimmer)" rx="6"/>

      <!-- Blinking cursor (gated by cycle) -->
      <g class="cursorGate">
        <rect class="cursorBlink" x="140" y="204" width="3" height="15" fill="#FFFFFF" rx="1" filter="url(#textGlow)"/>
      </g>
    </g>
  </g>

  <!-- ═══════════════ AMBIENT PARTICLES ═══════════════ -->
  <g filter="url(#softGlow)" font-family="'JetBrains Mono', monospace" font-size="11">
    <text x="22" y="55" fill="#5B8FE8" opacity="0.5">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="4s" repeatCount="indefinite"/>
      <animate attributeName="y" values="58;48;58" dur="4s" repeatCount="indefinite"/>
      { }
    </text>
    <text x="365" y="65" fill="#7BABF8" opacity="0.4">
      <animate attributeName="opacity" values="0.2;0.6;0.2" dur="5s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="y" values="68;58;68" dur="5s" repeatCount="indefinite" begin="1s"/>
      =&gt;
    </text>
    <text x="18" y="250" fill="#64FFDA" opacity="0.35">
      <animate attributeName="opacity" values="0.2;0.5;0.2" dur="4.5s" repeatCount="indefinite" begin="0.5s"/>
      &lt;/&gt;
    </text>
    <text x="368" y="245" fill="#C792EA" opacity="0.35">
      <animate attributeName="opacity" values="0.2;0.5;0.2" dur="3.5s" repeatCount="indefinite" begin="2s"/>
      [ ]
    </text>
  </g>

  <!-- Floating energy particles -->
  <g filter="url(#ultraGlow)">
    <circle r="3" fill="#64FFDA">
      <animate attributeName="cx" values="5;45;5" dur="4.5s" repeatCount="indefinite"/>
      <animate attributeName="cy" values="140;140;140" dur="4.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0;0.9;0" dur="4.5s" repeatCount="indefinite"/>
    </circle>
    <circle r="2.5" fill="#C792EA">
      <animate attributeName="cx" values="395;355;395" dur="5s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="cy" values="135;135;135" dur="5s" repeatCount="indefinite" begin="1s"/>
      <animate attributeName="opacity" values="0;0.8;0" dur="5s" repeatCount="indefinite" begin="1s"/>
    </circle>
    <circle r="2" fill="#FFD700">
      <animate attributeName="cx" values="200;200;200" dur="3.5s" repeatCount="indefinite" begin="0.5s"/>
      <animate attributeName="cy" values="5;35;5" dur="3.5s" repeatCount="indefinite" begin="0.5s"/>
      <animate attributeName="opacity" values="0;0.7;0" dur="3.5s" repeatCount="indefinite" begin="0.5s"/>
    </circle>
    <circle r="2" fill="#82AAFF">
      <animate attributeName="cx" values="200;200;200" dur="4s" repeatCount="indefinite" begin="2s"/>
      <animate attributeName="cy" values="295;265;295" dur="4s" repeatCount="indefinite" begin="2s"/>
      <animate attributeName="opacity" values="0;0.6;0" dur="4s" repeatCount="indefinite" begin="2s"/>
    </circle>
  </g>
</svg>
